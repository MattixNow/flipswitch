!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("Flipswitch",[],t):"object"==typeof exports?exports.Flipswitch=t():e.Flipswitch=t()}(window,function(){return function(e){var t={};function s(i){if(t[i])return t[i].exports;var n=t[i]={i:i,l:!1,exports:{}};return e[i].call(n.exports,n,n.exports,s),n.l=!0,n.exports}return s.m=e,s.c=t,s.d=function(e,t,i){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(i,n,function(t){return e[t]}.bind(null,n));return i},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s(s.s=1)}([function(e,t,s){},function(e,t,s){"use strict";s.r(t);s(0);class i{constructor(e,t,s,i){this.element=void 0,this.sections=void 0,this.element=t,this.sections=s,this.defaults=e,this.init(i)}init(e){if(void 0===this.element)return;const t=window.getComputedStyle(this.element);let s=0,i=0;if(null!=t.transform){const e=new WebKitCSSMatrix(t.transform);s=e.m41,i=e.m42}const n=document.createElement("div");n.classList.add("js-flipswitch-main-wrapper","c-flipswitch__main-wrapper"),n.style.position="fixed",null!=this.defaults.offsetY?n.style.top=`${this.element.offsetTop+this.defaults.offsetY}px`:n.style.top=`${this.element.offsetTop}px`,null!=this.defaults.offsetX?n.style.left=`${this.element.offsetLeft+this.defaults.offsetX}px`:n.style.left=`${this.element.offsetLeft}px`,n.style.width=`${this.element.offsetWidth}px`,n.style.height=`${this.element.offsetHeight}px`,n.style.transform=`translate(${s}px, ${i}px)`,this.element.style.position="relative",this.element.style.top="0px",this.element.style.left="0px",this.element.style.transform="none";const o=document.createElement("div");o.classList.add("js-flipswitch-element-top-wrapper","c-flipswitch__element-top-wrapper");const l=document.createElement("div");l.classList.add("js-flipswitch-element-wrapper","c-flipswitch__element-wrapper");const r=this.element.parentElement;this.iterateItems(n,o,l,e),r.removeChild(this.element),r.appendChild(n)}iterateItems(e,t,s,i){if(void 0!==this.sections&&void 0!==this.element){for(let i=0;i<this.sections.length+1;i++){const n=t.cloneNode(!0),o=s.cloneNode(!0),l=this.element.cloneNode(!0);if(i===this.sections.length)o.appendChild(l),n.appendChild(o),n.classList.add("c-flipswitch__element-top-wrapper--default"),e.appendChild(n);else{const t=this.sections[i].dataset.flipswitchClass||"";""!==t&&l.classList.add(t),o.appendChild(l),n.appendChild(o),e.appendChild(n)}}i(!0)}}}class n{constructor(e,t,s){this.sections=void 0,this.mainWrapper=document.querySelector(".js-flipswitch-main-wrapper"),this.elementWrappers=document.querySelectorAll(".js-flipswitch-element-wrapper"),this.elementTopWrappers=document.querySelectorAll(".js-flipswitch-element-top-wrapper"),this.defaultSection=!1,this.transformOnX=0,this.elements=document.querySelectorAll(`.${t}`),this.sections=s,this.defaults=e;const i=window.getComputedStyle(this.mainWrapper);if(null!=i.transform){const e=new WebKitCSSMatrix(i.transform);this.transformOnX=e.m42}this.init()}init(){const e=this.mainWrapper.offsetTop,t=this.mainWrapper.offsetHeight,s=e+t;void 0!==this.sections&&(this.checkScrollPosition(e,t,s),this.defaults.useScroll&&window.addEventListener("scroll",()=>{this.checkScrollPosition(e,t,s)}))}checkScrollPosition(e,t,s){if(void 0!==this.sections){for(let i=0;i<this.sections.length;i++)this.iterateSections(t,e,i,s);this.defaults.useScroll||(null!=this.defaults.throttle&&0!==this.defaults.throttle?setTimeout(()=>{requestAnimationFrame(()=>this.checkScrollPosition(e,t,s))},this.defaults.throttle):requestAnimationFrame(()=>this.checkScrollPosition(e,t,s)))}}iterateSections(e,t,s,i){if(void 0===this.sections)return;const n=this.sections[s].getBoundingClientRect().top-this.transformOnX,o=this.getPercentage(this.sections[s].offsetHeight+n-t,e);if(i>n&&i<n+e){const i=this.getPercentage(n-t,e);s>0&&!this.defaultSection&&(this.sections[s].offsetTop>this.sections[s-1].offsetTop+this.sections[s-1].offsetHeight?this.positionElement(this.elementTopWrappers[s-1],this.elementWrappers[s-1],100):this.positionElement(this.elementTopWrappers[s-1],this.elementWrappers[s-1],i)),this.elementTopWrappers[s].style.transform=`translateY(${100-i}%)`,this.elementWrappers[s].style.transform=`translateY(-${100-i}%)`,this.setInvisibleWrappers(s)}else if(-(n-t)>this.sections[s].offsetHeight-e&&Math.abs(n-t)<this.sections[s].offsetHeight)s>0&&!this.defaultSection&&this.positionElement(this.elementTopWrappers[s-1],this.elementWrappers[s-1],o),this.positionElement(this.elementTopWrappers[s],this.elementWrappers[s],o),this.setInvisibleWrappers(s);else if(n-t<0&&Math.abs(n-t)<this.sections[s].offsetHeight-e)this.setInvisibleWrappers(s),this.elementTopWrappers[s].style.transform="translateY(0%)",this.elementWrappers[s].style.transform="translateY(0%)";else if(-(n-t)>this.sections[s].offsetHeight&&-(n-t)<this.sections[s].offsetHeight+this.sections[s].offsetHeight-e){this.defaultSection=!0,s>0&&!this.defaultSection&&this.positionElement(this.elementTopWrappers[s-1],this.elementWrappers[s-1],o),this.positionElement(this.elementTopWrappers[s],this.elementWrappers[s],o);for(let e=0;e<this.sections.length;e++)this.elementTopWrappers[e].style.transform="translateY(-100%)",this.elementWrappers[e].style.transform="translateY(-100%)";this.setInvisibleWrappers(s)}}setInvisibleWrappers(e){if(e>0&&void 0!==this.sections)for(let t=0;t<this.sections.length;t++)t<e&&t<e-1?(this.elementWrappers[t].style.transform="translateY(-100%)",this.elementTopWrappers[t].style.transform="translateY(100%)"):t>e&&(this.elementWrappers[t].style.transform="translateY(100%)",this.elementTopWrappers[t].style.transform="translateY(-100%)");else if(void 0!==this.sections)for(let t=0;t<this.sections.length;t++)t>e&&(this.elementWrappers[t].style.transform="translateY(100%)",this.elementTopWrappers[t].style.transform="translateY(-100%)")}getPercentage(e,t){return 100-100/t*e}positionElement(e,t,s){s>=100&&s<=-100||(e.style.transform=`translateY(-${s}%)`,t.style.transform=`translateY(${s}%)`)}}s.d(t,"default",function(){return o});class o{constructor(e={}){this.defaults={},this.element=void 0;if(this.defaults=Object.assign({},{elementClass:"js-flipswitch-element",sectionsClass:"js-flipswitch-section",useScroll:!1,offsetX:0,offsetY:0,throttle:0},e),this.element=document.querySelector(`.${this.defaults.elementClass}`),this.sections=document.querySelectorAll(`.${this.defaults.sectionsClass}`),void 0===this.element)throw new Error("Missing element or sections selector (class)!");new Promise((e,t)=>{new i(this.defaults,this.element,this.sections,e)}).then(()=>{new n(this.defaults,this.defaults.elementClass,this.sections)})}}}])});